import { useRef } from 'react';
import { Link } from 'react-router-dom';

import { ROUTES } from '../../router/routes';

import './style.scss'

const HeaderShareModal = ({ type, artistId, album, playlists, addToPlaylist, isInLibrary, saveToLib, spotify }) => {
    const windowWidth = useRef(window.innerWidth);
    return (
        <div className="modal-wrapper share-modal-wrapper">
            {
                artistId ? <OpenArtist url={artistId}/> : null
            }
            {
                album ? <OpenAlbum url={album}/> : null
            }

            

            {
                playlists && windowWidth.current > 850 ? <AddToPlaylist playlists={playlists} addToPlaylist={addToPlaylist}/> : null
            }

            {
                type !== 'library' ?
                <SaveToLib isInLibrary={isInLibrary} saveToLib={saveToLib} type={type}/> : null
                
            }

            <div className="modal-item"
                onClick={() => {
                    navigator.clipboard.writeText(window.location);
                }}
            >
                    <svg width="17" height="11" viewBox="0 0 17 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.94701 3.57692H11.0484C11.516 3.57692 11.8986 3.92308 11.8986 4.34615C11.8986 4.76923 11.516 5.11538 11.0484 5.11538H5.94701C5.47938 5.11538 5.09678 4.76923 5.09678 4.34615C5.09678 3.92308 5.47938 3.57692 5.94701 3.57692ZM16.0903 4.34615C16.6174 4.34615 17 3.89231 16.881 3.43077C16.6533 2.59473 16.1226 1.8518 15.3736 1.32057C14.6247 0.789343 13.7006 0.500447 12.7488 0.5H10.1556C9.71353 0.5 9.34793 0.830769 9.34793 1.23077C9.34793 1.63077 9.71353 1.96154 10.1556 1.96154H12.7488C13.9817 1.96154 15.019 2.73077 15.308 3.76154C15.4016 4.1 15.7077 4.34615 16.0903 4.34615ZM1.66185 3.86923C1.89991 2.73846 3.07323 1.96154 4.34858 1.96154H6.83975C7.28187 1.96154 7.64747 1.63077 7.64747 1.23077C7.64747 0.830769 7.28187 0.5 6.83975 0.5H4.4336C2.2145 0.5 0.233463 1.96923 0.0209055 3.96923C-0.0378775 4.50325 0.0276399 5.04249 0.213237 5.55221C0.398834 6.06193 0.700393 6.53082 1.09849 6.92867C1.49658 7.32652 1.98238 7.64451 2.52458 7.86216C3.06679 8.0798 3.65337 8.19226 4.24655 8.19231H6.83975C7.28187 8.19231 7.64747 7.86154 7.64747 7.46154C7.64747 7.06154 7.28187 6.73077 6.83975 6.73077H4.24655C3.85601 6.72968 3.47059 6.65034 3.11799 6.49845C2.76538 6.34655 2.45433 6.12588 2.20721 5.85229C1.96008 5.57869 1.78301 5.25897 1.68872 4.91609C1.59442 4.57322 1.58525 4.2157 1.66185 3.86923ZM13.5991 4.34615C13.1315 4.34615 12.7488 4.69231 12.7488 5.11538V6.65385H11.0484C10.5808 6.65385 10.1982 7 10.1982 7.42308C10.1982 7.84615 10.5808 8.19231 11.0484 8.19231H12.7488V9.73077C12.7488 10.1538 13.1315 10.5 13.5991 10.5C14.0667 10.5 14.4493 10.1538 14.4493 9.73077V8.19231H16.1498C16.6174 8.19231 17 7.84615 17 7.42308C17 7 16.6174 6.65385 16.1498 6.65385H14.4493V5.11538C14.4493 4.69231 14.0667 4.34615 13.5991 4.34615Z" fill="#555454"/>
                    </svg>
                <h3>Копіювати посилання</h3>
            </div>
            
            {
                spotify ? <OpenSpotify spotify={spotify}/> : null
                
            }

        </div>
    );
};

const OpenArtist = ({ url }) => {
    return (
        <Link to={ROUTES.singleArtist(url)}>
            <div className="modal-item">
                    <svg width="10" height="11" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.90902 6.39225H6.81812V3.66498H4.09084V4.57407H5.2663L2.84357 6.9968L3.4863 7.63952L5.90902 5.2168V6.39225Z" fill="#555454"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M10 8.68182C10 9.16403 9.80844 9.62649 9.46747 9.96747C9.12649 10.3084 8.66403 10.5 8.18182 10.5H1.81818C1.33597 10.5 0.873508 10.3084 0.532534 9.96747C0.191558 9.62649 0 9.16403 0 8.68182V2.31818C0 1.83597 0.191558 1.37351 0.532534 1.03253C0.873508 0.691558 1.33597 0.5 1.81818 0.5H8.18182C8.66403 0.5 9.12649 0.691558 9.46747 1.03253C9.80844 1.37351 10 1.83597 10 2.31818V8.68182ZM8.18182 9.59091H1.81818C1.57708 9.59091 1.34585 9.49513 1.17536 9.32464C1.00487 9.15415 0.909091 8.92292 0.909091 8.68182V2.31818C0.909091 2.07708 1.00487 1.84585 1.17536 1.67536C1.34585 1.50487 1.57708 1.40909 1.81818 1.40909H8.18182C8.42292 1.40909 8.65415 1.50487 8.82464 1.67536C8.99513 1.84585 9.09091 2.07708 9.09091 2.31818V8.68182C9.09091 8.92292 8.99513 9.15415 8.82464 9.32464C8.65415 9.49513 8.42292 9.59091 8.18182 9.59091Z" fill="#555454"/>
                    </svg>
                <h3>Перейти до виконавця</h3>
            </div>
        </Link>
    );
}
const OpenAlbum = ({ url }) => {
    return (
        <Link to={ROUTES.singleAlbum(url)}>
            <div className="modal-item">
                    <svg width="10" height="11" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.90902 6.39225H6.81812V3.66498H4.09084V4.57407H5.2663L2.84357 6.9968L3.4863 7.63952L5.90902 5.2168V6.39225Z" fill="#555454"/>
                        <path fillRule="evenodd" clipRule="evenodd" d="M10 8.68182C10 9.16403 9.80844 9.62649 9.46747 9.96747C9.12649 10.3084 8.66403 10.5 8.18182 10.5H1.81818C1.33597 10.5 0.873508 10.3084 0.532534 9.96747C0.191558 9.62649 0 9.16403 0 8.68182V2.31818C0 1.83597 0.191558 1.37351 0.532534 1.03253C0.873508 0.691558 1.33597 0.5 1.81818 0.5H8.18182C8.66403 0.5 9.12649 0.691558 9.46747 1.03253C9.80844 1.37351 10 1.83597 10 2.31818V8.68182ZM8.18182 9.59091H1.81818C1.57708 9.59091 1.34585 9.49513 1.17536 9.32464C1.00487 9.15415 0.909091 8.92292 0.909091 8.68182V2.31818C0.909091 2.07708 1.00487 1.84585 1.17536 1.67536C1.34585 1.50487 1.57708 1.40909 1.81818 1.40909H8.18182C8.42292 1.40909 8.65415 1.50487 8.82464 1.67536C8.99513 1.84585 9.09091 2.07708 9.09091 2.31818V8.68182C9.09091 8.92292 8.99513 9.15415 8.82464 9.32464C8.65415 9.49513 8.42292 9.59091 8.18182 9.59091Z" fill="#555454"/>
                    </svg>
                <h3>Перейти до альбому</h3>
            </div>
        </Link>
    );
}

const AddToPlaylist = ({ playlists, addToPlaylist }) => {
    return (
        <>
            <hr/>
            <div className='modal-item modal-playlists'>
                <svg width="10" height="11" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.5 6V7.5C4.5 7.64167 4.548 7.7605 4.644 7.8565C4.74 7.9525 4.85867 8.00033 5 8C5.14167 8 5.2605 7.952 5.3565 7.856C5.4525 7.76 5.50033 7.64133 5.5 7.5V6H7C7.14167 6 7.2605 5.952 7.3565 5.856C7.4525 5.76 7.50033 5.64133 7.5 5.5C7.5 5.35833 7.452 5.2395 7.356 5.1435C7.26 5.0475 7.14133 4.99967 7 5H5.5V3.5C5.5 3.35833 5.452 3.2395 5.356 3.1435C5.26 3.0475 5.14133 2.99967 5 3C4.85833 3 4.7395 3.048 4.6435 3.144C4.5475 3.24 4.49967 3.35867 4.5 3.5V5H3C2.85833 5 2.7395 5.048 2.6435 5.144C2.5475 5.24 2.49967 5.35867 2.5 5.5C2.5 5.64167 2.548 5.7605 2.644 5.8565C2.74 5.9525 2.85867 6.00033 3 6H4.5ZM5 10.5C4.30833 10.5 3.65833 10.3687 3.05 10.106C2.44167 9.84333 1.9125 9.48717 1.4625 9.0375C1.0125 8.5875 0.656333 8.05833 0.394 7.45C0.131667 6.84167 0.000333333 6.19167 0 5.5C0 4.80833 0.131333 4.15833 0.394 3.55C0.656667 2.94167 1.01283 2.4125 1.4625 1.9625C1.9125 1.5125 2.44167 1.15633 3.05 0.894C3.65833 0.631667 4.30833 0.500333 5 0.5C5.69167 0.5 6.34167 0.631333 6.95 0.894C7.55833 1.15667 8.0875 1.51283 8.5375 1.9625C8.9875 2.4125 9.34383 2.94167 9.6065 3.55C9.86917 4.15833 10.0003 4.80833 10 5.5C10 6.19167 9.86867 6.84167 9.606 7.45C9.34333 8.05833 8.98717 8.5875 8.5375 9.0375C8.0875 9.4875 7.55833 9.84383 6.95 10.1065C6.34167 10.3692 5.69167 10.5003 5 10.5ZM5 9.5C6.11667 9.5 7.0625 9.1125 7.8375 8.3375C8.6125 7.5625 9 6.61667 9 5.5C9 4.38333 8.6125 3.4375 7.8375 2.6625C7.0625 1.8875 6.11667 1.5 5 1.5C3.88333 1.5 2.9375 1.8875 2.1625 2.6625C1.3875 3.4375 1 4.38333 1 5.5C1 6.61667 1.3875 7.5625 2.1625 8.3375C2.9375 9.1125 3.88333 9.5 5 9.5Z" fill="#555454"/>
                </svg>
                <h3>Додати до плейліста</h3>
                <ul className="playlists-wrapper">
                    {
                        playlists.map(item => (
                            <li
                                key={item.id}
                                onClick={() => addToPlaylist(item.id)}
                            >{item.name}</li> 
                        ))
                    }
                </ul>
            </div>
        </>
    );
}

const SaveToLib = ({ isInLibrary, saveToLib, type }) => {

    return (
        <>
            <div className="modal-item"
                onClick={() => saveToLib()}
            >
                    {
                        isInLibrary ?
                            <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1.80801 0.393005L20.192 18.778L18.778 20.192L15.031 16.445L11 20.485L2.52001 11.993C1.53436 10.8873 0.992533 9.45618 0.99881 7.97499C1.00509 6.49379 1.55903 5.06727 2.55401 3.97001L0.393005 1.80801L1.80801 0.393005ZM19.243 3.75701C20.3263 4.84019 20.9543 6.29675 20.9982 7.82809C21.0421 9.35943 20.4985 10.8496 19.479 11.993L17.844 13.629L6.26001 2.04601C7.11035 1.93941 7.97368 2.01665 8.7916 2.2725C9.60952 2.52835 10.363 2.95684 11.001 3.52901C12.1436 2.50621 13.6345 1.95987 15.1674 2.00228C16.7003 2.04468 18.1587 2.6726 19.243 3.75701Z" fill="#555454"/>
                            </svg> :
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.25564 0.5C7.16523 0.5 6.23348 1.27723 5.72157 1.81308C5.20966 1.27723 4.27999 0.5 3.19009 0.5C1.31152 0.5 0 1.80944 0 3.68385C0 5.74919 1.62886 7.08412 3.20466 8.37535C3.9486 8.98559 4.71855 9.61612 5.30902 10.3153C5.40839 10.4324 5.55405 10.5 5.707 10.5H5.73718C5.89065 10.5 6.03579 10.4318 6.13464 10.3153C6.72615 9.61612 7.49558 8.98507 8.24004 8.37535C9.81532 7.08464 11.4452 5.74971 11.4452 3.68385C11.4452 1.80944 10.1337 0.5 8.25564 0.5Z" fill="#555454"/>
                            </svg>
                    }
                {
                    type !== 'artist' ?
                    <h3>{isInLibrary ? 'Видалити з бібліотеки' : 'Зберегти до бібліотеки'}</h3>
                    :
                    <h3>{isInLibrary ? 'Не стежити' : 'Стежити'}</h3>
                }
            </div>
            <hr/>
        </>
    );
}

const OpenSpotify = ({ spotify }) => {
    return (
        <Link to={spotify} target="_blank">
            <div className="modal-item">
                    <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.5445 5.58961L7.37791 9.93663C7.31963 9.99749 7.24536 10.0389 7.1645 10.0557C7.08363 10.0725 6.9998 10.0639 6.92363 10.031C6.84746 9.99808 6.78236 9.94231 6.73658 9.87076C6.6908 9.79921 6.6664 9.7151 6.66647 9.62908V7.46807C3.69258 7.64412 1.65357 9.65624 1.08119 10.2936C0.991313 10.3938 0.873451 10.4618 0.744377 10.488C0.615304 10.5142 0.481595 10.4973 0.36228 10.4396C0.242966 10.3819 0.144124 10.2865 0.0798225 10.1668C0.0155208 10.0471 -0.0109648 9.90935 0.0041349 9.77307C0.197359 8.02014 1.11765 6.33404 2.59574 5.02559C3.82331 3.93883 5.31546 3.24929 6.66647 3.12866V0.935044C6.6664 0.849018 6.6908 0.764907 6.73658 0.693358C6.78236 0.621808 6.84746 0.566039 6.92363 0.533109C6.9998 0.500179 7.08363 0.49157 7.1645 0.508372C7.24536 0.525173 7.31963 0.566629 7.37791 0.627493L11.5445 4.97451C11.5832 5.01488 11.6139 5.06282 11.6349 5.1156C11.6559 5.16837 11.6667 5.22493 11.6667 5.28206C11.6667 5.33919 11.6559 5.39575 11.6349 5.44852C11.6139 5.5013 11.5832 5.54924 11.5445 5.58961Z" fill="#555454"/>
                    </svg>
                <h3>Відкрити в Spotify</h3>
            </div>
        </Link>
    );
}

export default HeaderShareModal;